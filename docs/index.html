<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neural Networks to Approximate IUCN Red List Conservation Assessments • IUCNN</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Neural Networks to Approximate IUCN Red List Conservation Assessments">
<meta property="og:description" content='Train neural networks based on geographic species occurrences, environmental data and existing IUCN Red List assessments to predict the conservation status of "Not Evaluated" or "Data Deficient" species, for any taxon or geographic region of interest.'>
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">IUCNN</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Approximate_IUCN_Red_List_assessments_with_IUCNN.html">Approximate IUCN Red List assessments with IUCNN</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/azizka/IUCNN/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="iucnn" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#iucnn" class="anchor"></a>IUCNN</h1></div>
<p>Batch estimation of species’ IUCN Red List threat status using neural networks.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<ol>
<li>Install IUCNN directly from Github using devtools.</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span>

<span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"azizka/IUCNN"</span><span class="op">)</span></code></pre></div>
<ol>
<li>Since some of IUCNNs functions are run in Python, IUCNN needs to set up a Python environment. This is easily done from within R, using the <code><a href="https://rdrr.io/pkg/reticulate/man/install_miniconda.html">install_miniconda()</a></code> function of the package <code>reticulate</code> (this will need c. 3 GB disk space). If problems occur at this step, check the excellent <a href="https://rstudio.github.io/reticulate/index.html">documentation of reticulate</a>.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"reticulate"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/reticulate">reticulate</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/reticulate/man/install_miniconda.html">install_miniconda</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<ol>
<li>Install the tensorflow python library. If you are using <strong>MacOS</strong> or <strong>Linux</strong> it is recommended to install tensorflow using conda:</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reticulate/man/conda-tools.html">conda_install</a></span><span class="op">(</span><span class="st">"r-reticulate"</span>,<span class="st">"tensorflow=2.4"</span><span class="op">)</span></code></pre></div>
<p>If you are using <strong>Windows</strong>, you can install tensorflow using pip:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reticulate/man/py_install.html">py_install</a></span><span class="op">(</span><span class="st">"tensorflow~=2.4.0rc4"</span>, pip <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<ol>
<li>Finally install the npBNN python library from Github:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reticulate/man/py_install.html">py_install</a></span><span class="op">(</span><span class="st">"https://github.com/dsilvestro/npBNN/archive/v0.1.10.tar.gz"</span>, pip <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div id="usage" class="section level1">
<h1 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h1>
<p>There are multiple models and features available in IUCNN. A vignette with a detailed tutorial on how to use those is available as part of the package: <code><a href="articles/Approximate_IUCN_Red_List_assessments_with_IUCNN.html">vignette("Approximate_IUCN_Red_List_assessments_with_IUCNN")</a></code>. Running IUCNN will write files to your working directory.</p>
<p>A simple example run for terrestrial orchids (This will take about 5 minutes and download ~500MB of data for feature preparation into the working directory):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/azizka/IUCNN">IUCNN</a></span><span class="op">)</span>

<span class="co">#load example data </span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"training_occ"</span><span class="op">)</span> <span class="co">#geographic occurrences of species with IUCN assessment</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"training_labels"</span><span class="op">)</span><span class="co"># the corresponding IUCN assessments</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"prediction_occ"</span><span class="op">)</span> <span class="co">#occurrences from Not Evaluated species to prdict</span>

<span class="co"># 1. Feature and label preparation</span>
<span class="va">features</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_prepare_features.html">iucnn_prepare_features</a></span><span class="op">(</span><span class="va">training_occ</span><span class="op">)</span> <span class="co"># Training features</span>
<span class="va">labels_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_prepare_labels.html">iucnn_prepare_labels</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">training_labels</span>,
                                     y <span class="op">=</span> <span class="va">features</span><span class="op">)</span> <span class="co"># Training labels</span>
<span class="va">features_predict</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_prepare_features.html">iucnn_prepare_features</a></span><span class="op">(</span><span class="va">prediction_occ</span><span class="op">)</span> <span class="co"># Prediction features</span>

<span class="co"># 2. Model training</span>
<span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_train_model.html">iucnn_train_model</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">features</span>, lab <span class="op">=</span> <span class="va">labels_train</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span>

<span class="co"># 3. Prediction</span>
<span class="fu">iucnn_predict</span><span class="op">(</span>x <span class="op">=</span> <span class="va">features_predict</span>,
              model <span class="op">=</span> <span class="va">m1</span><span class="op">)</span></code></pre></div>
<p>With model testing</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/azizka/IUCNN">IUCNN</a></span><span class="op">)</span>

<span class="co">#load example data </span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"training_occ"</span><span class="op">)</span> <span class="co">#geographic occurrences of species with IUCN assessment</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"training_labels"</span><span class="op">)</span><span class="co"># the corresponding IUCN assessments</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"prediction_occ"</span><span class="op">)</span> <span class="co">#occurrences from Not Evaluated species to predict</span>

<span class="co"># Feature and label preparation</span>
<span class="va">features</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_prepare_features.html">iucnn_prepare_features</a></span><span class="op">(</span><span class="va">training_occ</span><span class="op">)</span> <span class="co"># Training features</span>
<span class="va">labels_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_prepare_labels.html">iucnn_prepare_labels</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">training_labels</span>,
                                     y <span class="op">=</span> <span class="va">features</span><span class="op">)</span> <span class="co"># Training labels</span>
<span class="va">features_predict</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_prepare_features.html">iucnn_prepare_features</a></span><span class="op">(</span><span class="va">prediction_occ</span><span class="op">)</span> <span class="co"># Prediction features</span>


<span class="co"># Model testing</span>
<span class="co"># For illustration models differing in dropout rate and number of layers</span>

<span class="va">mod_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_modeltest.html">iucnn_modeltest</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">features</span>,
                            lab <span class="op">=</span> <span class="va">labels_train</span>,
                            logfile <span class="op">=</span> <span class="st">"model_testing_results-2.txt"</span>,
                            model_outpath <span class="op">=</span> <span class="st">"iucnn_modeltest-2"</span>,
                            mode <span class="op">=</span> <span class="st">"nn-class"</span>,
                            dropout_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.0</span>, <span class="fl">0.1</span>, <span class="fl">0.3</span><span class="op">)</span>,
                            n_layers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"30"</span>, <span class="st">"40_20"</span>, <span class="st">"50_30_10"</span><span class="op">)</span>,
                            cv_fold <span class="op">=</span> <span class="fl">5</span>,
                            init_logfile <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Select best model</span>
<span class="va">m_best</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_best_model.html">iucnn_best_model</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mod_test</span>,
                          criterion <span class="op">=</span> <span class="st">"val_acc"</span>,
                          require_dropout <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Inspect model structure and performance</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m_best</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">m_best</span><span class="op">)</span>

<span class="co"># Train the best model on all training data for prediction</span>
<span class="va">m_prod</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_train_model.html">iucnn_train_model</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">features</span>,
                            lab <span class="op">=</span> <span class="va">labels_train</span>,
                            production_model <span class="op">=</span> <span class="va">m_best</span><span class="op">)</span>

<span class="co"># Predict RL categories for target species</span>
<span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu">iucnn_predict</span><span class="op">(</span>x <span class="op">=</span> <span class="va">features_predict</span>,
                      model <span class="op">=</span> <span class="va">m_prod</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">pred</span><span class="op">)</span></code></pre></div>
<p>Using a convolutional neural network</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">features</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_cnn_features.html">iucnn_cnn_features</a></span><span class="op">(</span><span class="va">training_occ</span><span class="op">)</span> <span class="co"># Training features</span>
<span class="va">labels_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_prepare_labels.html">iucnn_prepare_labels</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">training_labels</span>,
                                     y <span class="op">=</span> <span class="va">features</span><span class="op">)</span> <span class="co"># Training labels</span>
<span class="va">features_predict</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/iucnn_cnn_features.html">iucnn_cnn_features</a></span><span class="op">(</span><span class="va">prediction_occ</span><span class="op">)</span> <span class="co"># Prediction features</span></code></pre></div>
</div>
<div id="citation" class="section level1">
<h1 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h1>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/azizka/IUCNN">IUCNN</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span><span class="op">(</span><span class="st">"IUCNN"</span><span class="op">)</span></code></pre></div>
<p>Zizka A, Silvestro D, Vitt P, Knight T (2020). “Automated conservation assessment of the orchid family with deep learning.” <em>Conservation Biology</em>, 0, 0-0. doi: doi.org/10.1111/cobi.13616 (URL: <a href="https://doi.org/doi.org/10.1111/cobi.13616" class="uri">https://doi.org/doi.org/10.1111/cobi.13616</a>), &lt;URL: <a href="https://github.com/azizka/IUCNN" class="uri">https://github.com/azizka/IUCNN</a>&gt;.</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/azizka/IUCNN/">https://​github.com/​azizka/​IUCNN/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/azizka/IUCNN/issues">https://​github.com/​azizka/​IUCNN/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/LGPL-2">LGPL-2</a>.1</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing IUCNN</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Alexander Zizka <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/293626039"><img src="https://zenodo.org/badge/293626039.svg" alt="DOI"></a></li>
<li><a href="https://github.com/azizka/IUCNN/actions"><img src="https://github.com/azizka/IUCNN/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Alexander Zizka.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
