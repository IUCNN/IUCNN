<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Select the Best Model After Model-testing — iucnn_best_model • IUCNN</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Select the Best Model After Model-testing — iucnn_best_model"><meta property="og:description" content="Uses a data-frame of model-testing results generated with
iucnn_modeltest as input, and finds the best model
based on the chosen criterion."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">IUCNN</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Approximate_IUCN_Red_List_assessments_with_IUCNN.html">Approximate Red List assessments with IUCNN</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/IUCNN/IUCNN/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Select the Best Model After Model-testing</h1>
    <small class="dont-index">Source: <a href="https://github.com/IUCNN/IUCNN/blob/HEAD/R/iucnn_best_model.R" class="external-link"><code>R/iucnn_best_model.R</code></a></small>
    <div class="hidden name"><code>iucnn_best_model.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Uses a data-frame of model-testing results generated with
<code><a href="iucnn_modeltest.html">iucnn_modeltest</a></code> as input, and finds the best model
based on the chosen criterion.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">iucnn_best_model</span><span class="op">(</span><span class="va">x</span>, criterion <span class="op">=</span> <span class="st">"val_acc"</span>, require_dropout <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>a data.frame of model-testing results as produced
by <code><a href="iucnn_modeltest.html">iucnn_modeltest</a></code>.</p></dd>


<dt>criterion</dt>
<dd><p>name the criterion to rank models by (default="val_acc").
Valid options are
"val_acc","val_loss","weighted_error", or "total_class_matches"
(see details below):</p><ul><li><p>val_acc: highest validation accuracy</p></li>
<li><p>val_loss: lowest validation loss</p></li>
<li><p>weighted_error: lowest weighted error, e.g. an LC species misclassified as
CR has a weighted error of 4-0 = 4, while an LC species
misclassified as NT has a weighted error of 1-0 = 1.
These error scores are summed across all validation
predictions</p></li>
<li><p>total_class_matches: picks the model that best reproduces the class
distribution in the validation data. When picking
this criterion it is not considered whether or not
individual instances are predicted correctly, but
instead it only looks at the overall class distribution
in the predicted data.</p></li>
</ul></dd>


<dt>require_dropout</dt>
<dd><p>logical (default=FALSE). If set to TRUE, the best model
that contains a dropout rate of &gt; 0 will be picked, even if other non-dropout
models scored higher given the chosen criterion. Dropout models are required
for certain functionalities within IUCNN, such as e.g. choosing a target
accuracy when using predict_iucnn.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>outputs an <code>iucnn_model</code> object containing all
information about the best model.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>See <code><a href="../articles/Approximate_IUCN_Red_List_assessments_with_IUCNN.html">vignette("Approximate_IUCN_Red_List_assessments_with_IUCNN")</a></code>
for a tutorial on how to run IUCNN.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"training_occ"</span><span class="op">)</span> <span class="co">#geographic occurrences of species with IUCN assessment</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"training_labels"</span><span class="op">)</span><span class="co"># the corresponding IUCN assessments</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 1. Feature and label preparation</span></span></span>
<span class="r-in"><span><span class="va">features</span> <span class="op">&lt;-</span> <span class="fu"><a href="iucnn_prepare_features.html">iucnn_prepare_features</a></span><span class="op">(</span><span class="va">training_occ</span>, type <span class="op">=</span> <span class="st">"geographic"</span><span class="op">)</span> <span class="co"># Training features</span></span></span>
<span class="r-in"><span><span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="iucnn_prepare_labels.html">iucnn_prepare_labels</a></span><span class="op">(</span><span class="va">training_labels</span>, <span class="va">features</span><span class="op">)</span> <span class="co"># Training labels</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model-testing</span></span></span>
<span class="r-in"><span><span class="va">logfile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"model_testing_results.txt"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model_testing_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="iucnn_modeltest.html">iucnn_modeltest</a></span><span class="op">(</span><span class="va">features</span>,</span></span>
<span class="r-in"><span>                                       <span class="va">labels</span>,</span></span>
<span class="r-in"><span>                                       <span class="va">logfile</span>,</span></span>
<span class="r-in"><span>                                       model_outpath <span class="op">=</span> <span class="st">'iucnn_modeltest'</span>,</span></span>
<span class="r-in"><span>                                       mode <span class="op">=</span> <span class="st">'nn-class'</span>,</span></span>
<span class="r-in"><span>                                       seed <span class="op">=</span> <span class="fl">1234</span>,</span></span>
<span class="r-in"><span>                                       dropout_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.0</span>,<span class="fl">0.1</span>,<span class="fl">0.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                       n_layers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'30'</span>,<span class="st">'40_20'</span>,<span class="st">'50_30_10'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                       cv_fold <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                                       init_logfile <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Selecting best model based on chosen criterion</span></span></span>
<span class="r-in"><span><span class="va">best_iucnn_model</span> <span class="op">&lt;-</span> <span class="fu">iucnn_best_model</span><span class="op">(</span><span class="va">model_testing_results</span>,</span></span>
<span class="r-in"><span>                                   criterion <span class="op">=</span> <span class="st">'val_acc'</span>,</span></span>
<span class="r-in"><span>                                   require_dropout <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alexander Zizka.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

