<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Evaluate relative importance of training features — feature_importance • IUCNN</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Evaluate relative importance of training features — feature_importance" />
<meta property="og:description" content="Uses a model generated with iucnn_train_model
to evaluate how much each feature or
group of features contributes to the accuracy of
the test set predictions. The function
implements the concept of permutation feature importance,
in which the values in a given
feature column of the test set are shuffled randomly
among all samples. Then the feature
data manipulated in this manner are used to predict
labels for the test set and the accuracy
is compared to that of the original feature data.
The difference (delta accuracy) can be
interpreted as a measure of how important a
given feature or group of features is for the
trained NN to make accurate predictions." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">IUCNN</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Approximate_IUCN_Red_List_assessments_with_IUCNN.html">Approximate IUCN Red List assessments with IUCNN</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/azizka/IUCNN/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Evaluate relative importance of training features</h1>
    <small class="dont-index">Source: <a href='https://github.com/azizka/IUCNN/blob/master/R/iucnn_feature_importance.R'><code>R/iucnn_feature_importance.R</code></a></small>
    <div class="hidden name"><code>feature_importance.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Uses a model generated with <code><a href='iucnn_train_model.html'>iucnn_train_model</a></code>
to evaluate how much each feature or
group of features contributes to the accuracy of
the test set predictions. The function
implements the concept of permutation feature importance,
in which the values in a given
feature column of the test set are shuffled randomly
among all samples. Then the feature
data manipulated in this manner are used to predict
labels for the test set and the accuracy
is compared to that of the original feature data.
The difference (delta accuracy) can be
interpreted as a measure of how important a
given feature or group of features is for the
trained NN to make accurate predictions.</p>
    </div>

    <pre class="usage"><span class='fu'>feature_importance</span><span class='op'>(</span>
  <span class='va'>x</span>,
  feature_blocks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  n_permutations <span class='op'>=</span> <span class='fl'>100</span>,
  provide_indices <span class='op'>=</span> <span class='cn'>FALSE</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  unlink_features_within_block <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>iucnn_model object, as produced as output
when running <code><a href='iucnn_train_model.html'>iucnn_train_model</a></code></p></td>
    </tr>
    <tr>
      <th>feature_blocks</th>
      <td><p>a list. Default behavior is to
group the features into geographic, climatic,
biome, and human footprint features. Provide custom
list of feature names or indices to define other
feature blocks. If feature
indices are provided as in this example, turn provide_indices flag to TRUE.</p></td>
    </tr>
    <tr>
      <th>n_permutations</th>
      <td><p>an integer. Defines how many
iterations of shuffling feature values and
predicting the resulting accuracy are being executed.
The mean and standard deviation of the
delta accuracy are being summarized from these permutations.</p></td>
    </tr>
    <tr>
      <th>provide_indices</th>
      <td><p>logical. Set to TRUE if custom <code>feature_blocks</code>
are provided as indices. Default is FALSE.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical. Set to TRUE to print screen output while calculating
feature importance. Default is FALSE.</p></td>
    </tr>
    <tr>
      <th>unlink_features_within_block</th>
      <td><p>logical. If TRUE, the features within each
defined block are shuffled independently.
If FALSE, each feature column within a block is resorted in the same manner. Default is TRUE</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a data.frame with the relative importance of each feature block (see delta_acc_mean column).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>By default this function groups the features
into geographic, climatic, biome, and human
footprint features and determines the importance
of each of these blocks of features. The
feature blocks can be manually defined using the feature_blocks argument.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>See <code><a href='../articles/Approximate_IUCN_Red_List_assessments_with_IUCNN.html'>vignette("Approximate_IUCN_Red_List_assessments_with_IUCNN")</a></code> for a
tutorial on how to run IUCNN.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"training_occ"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"training_labels"</span><span class='op'>)</span>

<span class='va'>train_feat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='iucnn_prepare_features.html'>iucnn_prepare_features</a></span><span class='op'>(</span><span class='va'>training_occ</span><span class='op'>)</span>
<span class='va'>labels_train</span> <span class='op'>&lt;-</span> <span class='fu'><a href='iucnn_prepare_labels.html'>iucnn_prepare_labels</a></span><span class='op'>(</span><span class='va'>training_labels</span>,
                           level <span class='op'>=</span> <span class='st'>'detail'</span><span class='op'>)</span>

<span class='va'>train_output</span> <span class='op'>&lt;-</span> <span class='fu'><a href='iucnn_train_model.html'>iucnn_train_model</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>train_feat</span>,
                          lab <span class='op'>=</span> <span class='va'>labels_train</span>,
                          patience <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>


<span class='va'>imp_def</span> <span class='op'>&lt;-</span> <span class='fu'>iucnn_feature_importance</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>train_output</span><span class='op'>)</span>
<span class='va'>imp_cust</span> <span class='op'>&lt;-</span> <span class='fu'>iucnn_feature_importance</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>train_output</span>,
                              feature_blocks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>block1 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span><span class='op'>)</span>,
                                                    block2 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>,<span class='fl'>6</span>,<span class='fl'>7</span>,<span class='fl'>8</span><span class='op'>)</span><span class='op'>)</span>,
                              provide_indices <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alexander Zizka.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


